{% extends "zerver/emails/email_base_messages.html" %}

{% block content %}
    {% if hot_conversations %}
        {% for convo in hot_conversations %}
        <div class='messages'>
            {% for recipient_block in convo.first_few_messages %}
                <div class='hot_convo_recipient_block'>
                    <div class='hot_convo_recipient_header'>{{ recipient_block.header.html|safe }}</div>
                    <div class='hot_convo_message_content'>
                        {% for sender_block in recipient_block.senders %}
                            {% if sender_block.sender %} <div class="hot_convo_message_sender">{{ sender_block.sender }}</div>{% endif %}
                            {% for message_block in sender_block.content %}
                            <div class='hot_convo_message_content_block'>
                                {{ message_block.html|safe }}
                            </div>
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>
                {% if convo.count > 0 %}<p>+ {{ convo.count }} more message{{ convo.count|pluralize }} by {{ convo.participants|display_list(4) }}.</p>{% endif %}
            {% endfor %}
        </div>
        {% endfor %}
    {% endif %}

    {% if new_streams.html %}
    <br />
    <h2>New streams</h2>

    <p>{{ new_streams.html|display_list(4)|safe }}.</p>
    {% endif %}

    <br />

    <p><a href="{{ realm_uri }}">Click here to log in to Zulip and catch up.</a></p>
{% endblock %}

{% block manage_preferences %}
<p>
    <a href="{{ realm_uri }}/#settings/notifications">Manage email preferences</a> |
    <a href="{{ unsubscribe_link }}">Unsubscribe from digest emails</a>
</p>
{% endblock %}
